<!DOCTYPE html>
<html>
<head>
  <title>Student Registration</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-light">
<header style="display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
  <div style="display: flex; align-items: center;">
    <img src="https://pminternship.mca.gov.in/assets/img/MCA.svg" alt="MCA Logo" style="height: 50px; margin-right: 20px;">
    <img src="https://pminternship.mca.gov.in/assets/images/img/pm_internship_logo_eng.svg" alt="PM Internship Logo" style="height: 50px;">
  </div>
  <div>
    <a href="login.html" class="btn btn-modern btn-primary-modern m-1" style="min-width: 80px;">Login</a>
  </div>
</header>
<div class="container mt-5 fade-in">
<h2>Student Registration</h2>
  <form id="studentForm">
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input type="text" id="name" class="form-control" placeholder="Enter your name" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Skills</label>
      <input type="text" id="skills" class="form-control" placeholder="e.g., Python, JavaScript" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Preferred Location</label>
      <select id="location" class="form-control" onchange="toggleOtherLocation()">
        <option value="">Select a city</option>
        <option value="Mumbai">Mumbai</option>
        <option value="Delhi">Delhi</option>
        <option value="Bangalore">Bangalore</option>
        <option value="Hyderabad">Hyderabad</option>
        <option value="Chennai">Chennai</option>
        <option value="Kolkata">Kolkata</option>
        <option value="Pune">Pune</option>
        <option value="Ahmedabad">Ahmedabad</option>
        <option value="Jaipur">Jaipur</option>
        <option value="Surat">Surat</option>
        <option value="Lucknow">Lucknow</option>
        <option value="Kanpur">Kanpur</option>
        <option value="Nagpur">Nagpur</option>
        <option value="Indore">Indore</option>
        <option value="Bhopal">Bhopal</option>
        <option value="Visakhapatnam">Visakhapatnam</option>
        <option value="Patna">Patna</option>
        <option value="Vadodara">Vadodara</option>
        <option value="Ghaziabad">Ghaziabad</option>
        <option value="Ludhiana">Ludhiana</option>
        <option value="Agra">Agra</option>
        <option value="Nashik">Nashik</option>
        <option value="Faridabad">Faridabad</option>
        <option value="Meerut">Meerut</option>
        <option value="Rajkot">Rajkot</option>
        <option value="Kalyan-Dombivli">Kalyan-Dombivli</option>
        <option value="Vasai-Virar">Vasai-Virar</option>
        <option value="Varanasi">Varanasi</option>
        <option value="Srinagar">Srinagar</option>
        <option value="Aurangabad">Aurangabad</option>
        <option value="Dhanbad">Dhanbad</option>
        <option value="Amritsar">Amritsar</option>
        <option value="Navi Mumbai">Navi Mumbai</option>
        <option value="Allahabad">Allahabad</option>
        <option value="Ranchi">Ranchi</option>
        <option value="Howrah">Howrah</option>
        <option value="Coimbatore">Coimbatore</option>
        <option value="Jabalpur">Jabalpur</option>
        <option value="Gwalior">Gwalior</option>
        <option value="Vijayawada">Vijayawada</option>
        <option value="Jodhpur">Jodhpur</option>
        <option value="Madurai">Madurai</option>
        <option value="Raipur">Raipur</option>
        <option value="Kota">Kota</option>
        <option value="Guwahati">Guwahati</option>
        <option value="Chandigarh">Chandigarh</option>
        <option value="Solapur">Solapur</option>
        <option value="Hubli–Dharwad">Hubli–Dharwad</option>
        <option value="Bareilly">Bareilly</option>
        <option value="Mysore">Mysore</option>
        <option value="Tiruchirappalli">Tiruchirappalli</option>
        <option value="Other">Other</option>
      </select>
      <input type="text" id="otherLocation" class="form-control mt-2" placeholder="Enter other location" style="display:none;">
<script>
function toggleOtherLocation() {
  var locationSelect = document.getElementById('location');
  var otherInput = document.getElementById('otherLocation');
  if (locationSelect.value === 'Other') {
    otherInput.style.display = 'block';
    otherInput.required = true;
  } else {
    otherInput.style.display = 'none';
    otherInput.required = false;
  }
}
</script>
    </div>
    <button type="submit" class="btn btn-modern btn-primary-modern">Register</button>
  </form>
  <a href="index.html" class="btn btn-modern btn-link-modern mt-3">Back to Home</a>
</div>
<div id="spinner" class="mt-5 text-center" style="display: none; padding: 20px;">
  <div class="ai-icon-small"></div>
  <p class="thinking-text" style="color: #333; font-size: 1rem; margin-top: 10px;">AI is matching internships<span class="dots"></span></p>
</div>
<style>
.ai-icon-small {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #00ffff 0%, #0080ff 50%, #800080 100%);
  position: relative;
  margin: 0 auto;
  animation: rotate 3s linear infinite, pulse 1.5s ease-in-out infinite alternate;
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
}

.ai-icon-small::before,
.ai-icon-small::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background: conic-gradient(from 0deg, transparent 0deg, #00ffff 90deg, transparent 180deg, #800080 270deg, transparent 360deg);
  animation: wave 2s ease-in-out infinite;
}

.ai-icon-small::after {
  animation-delay: -1s;
  opacity: 0.7;
}

@keyframes rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulse {
  0% { box-shadow: 0 0 10px rgba(0, 255, 255, 0.3); }
  100% { box-shadow: 0 0 20px rgba(128, 0, 128, 0.5), 0 0 30px rgba(0, 255, 255, 0.4); }
}

@keyframes wave {
  0%, 100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
  50% { transform: translate(-50%, -50%) scale(1.05) rotate(180deg); }
}

.thinking-text {
  font-size: 1rem;
  margin-top: 5px;
}

.dots::after {
  content: '';
  animation: dots 1.5s infinite;
}

@keyframes dots {
  0%, 20% { content: ''; }
  40% { content: '.'; }
  60% { content: '..'; }
  80%, 100% { content: '...'; }
}
</style>
<div id="matches" class="mt-5" style="display: none;">
  <h3>Matching Internship Opportunities</h3>
  <div id="matchesList"></div>
</div>
<script src="companies.js"></script>
<script src="script.js"></script>
<script>
  document.getElementById('studentForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const skillsInput = document.getElementById('skills').value;
    const locationSelect = document.getElementById('location');
    let location = locationSelect.value;
    if (location === 'Other') {
      location = document.getElementById('otherLocation').value;
    }

    // Temporarily store data (in real app, send to backend)
    const studentData = { name, email, skills: skillsInput.split(',').map(s => s.trim().toLowerCase()), location: location.toLowerCase() };

    // Show spinner
    document.getElementById('spinner').style.display = 'block';

    // Simulate matching after 3 seconds
    setTimeout(() => {
      // Hide spinner
      document.getElementById('spinner').style.display = 'none';

      // Find matching internships
      const matches = findMatchingInternships(studentData);

      // Display matches
      displayMatches(matches);

      // Show matches section
      document.getElementById('matches').style.display = 'block';
    }, 3000);
  });

  function findMatchingInternships(student) {
    // Filter companies by location and skills
    let filtered = companies.filter(company => {
      const locationMatch = company.location.toLowerCase() === student.location;
      const skillsMatch = company.skills.some(skill => student.skills.includes(skill.toLowerCase()));
      return locationMatch && skillsMatch;
    });

    // If less than 2, add some with location match only
    if (filtered.length < 2) {
      const locationOnly = companies.filter(company => 
        company.location.toLowerCase() === student.location && !filtered.includes(company)
      );
      filtered = filtered.concat(locationOnly.slice(0, 2 - filtered.length));
    }

    // If still less, add random
    if (filtered.length < 2) {
      const others = companies.filter(company => !filtered.includes(company));
      filtered = filtered.concat(others.slice(0, 2 - filtered.length));
    }

    // Sort by number of matching skills
    filtered.sort((a, b) => {
      const aMatches = a.skills.filter(skill => student.skills.includes(skill.toLowerCase())).length;
      const bMatches = b.skills.filter(skill => student.skills.includes(skill.toLowerCase())).length;
      return bMatches - aMatches;
    });

    return filtered.slice(0, 2); // At least 2
  }

  function displayMatches(matches) {
    const matchesList = document.getElementById('matchesList');
    matchesList.innerHTML = '';
    matches.forEach(match => {
      const matchDiv = document.createElement('div');
      matchDiv.className = 'card mb-3';
      matchDiv.innerHTML = `
        <div class="card-body">
          <h5 class="card-title">${match.companyName} - ${match.role}</h5>
          <p class="card-text"><strong>Skills:</strong> ${match.skills.join(', ')}</p>
          <p class="card-text"><strong>Location:</strong> ${match.location}</p>
          <p class="card-text">${match.description}</p>
          <p class="card-text"><strong>Contact:</strong> ${match.email}</p>
        </div>
      `;
      matchesList.appendChild(matchDiv);
    });
  }
</script>

  <!-- AI Chatbot -->
  <div id="chat-window" class="chat-window">
    <div class="chat-header">
      <h5>PM Internship Assistant</h5>
      <span id="close-chat">&times;</span>
    </div>
    <div id="chat-messages"></div>
    <form id="chat-form">
      <input type="text" id="chat-input" placeholder="Type your message...">
      <button type="submit">Send</button>
    </form>
  </div>
  <button id="chatbot-btn" class="chatbot-btn"><img src="https://cdn.shopify.com/app-store/listing_images/e01adf90e60dcfdb4e39b5485859d18b/icon/CMrqusKG_4wDEAE=.png" alt="AI Bot"></button>
  <script src="chatbot.js"></script>
</body>
</html>
